(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{65:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n(18),o=n.n(a),i=n(9),r=n.n(i),c=n(1),u=n.n(c),s=n(2),f=n(19),l=n(11),d=n(37),b=n(47),m=n(44),v=n(45),p=n(67),g=n(43);function h(){var e=Object(c.useState)(null),t=r()(e,2),n=t[0],a=t[1],i=Object(c.useState)(null),h=r()(i,2),E=h[0],w=h[1],y=Object(c.useState)(!1),O=r()(y,2),j=O[0],x=O[1],S=Object(c.useState)(""),N=r()(S,2),k=N[0],C=N[1],I=Object(c.useState)(""),T=r()(I,2),F=T[0],L=T[1],D=Object(c.useState)(""),P=r()(D,2),W=P[0],z=P[1],B=Object(c.useState)(0),J=r()(B,2),M=J[0],U=J[1],_=Object(c.useState)("#fff"),q=r()(_,2),A=q[0],H=q[1],V=Object(c.useState)(null),G=r()(V,2),K=G[0],Q=G[1],R=Object(c.useState)(!1),X=r()(R,2),Y=X[0],Z=X[1];Object(c.useEffect)((function(){if(E&&n){var e=n.focus().subscribe((function(e){U(Number(e.probability.toFixed(2)))}));return function(){e.unsubscribe()}}}),[E,n]),Object(c.useEffect)((function(){!function(){var e;o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(m.a.getItem("deviceId"));case 2:(e=t.sent)&&C(e);case 4:case"end":return t.stop()}}))}(),"web"===p.a.OS&&ee()}),[]),Object(c.useEffect)((function(){if(k){var e=new g.Notion({deviceId:k});a(e)}else x(!1)}),[k]);var $=function(){w(!0),Q(setInterval((function(){U(Math.random())}),1e3))};Object(c.useEffect)((function(){if(n){var e=n.onAuthStateChanged().subscribe((function(e){e&&w(e),x(!1)}));return function(){e.unsubscribe()}}}),[n]),Object(c.useEffect)((function(){!E&&n&&F&&W&&function(){var e;o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a.awrap(n.login({email:F,password:W}).catch((function(e){console.log(e)})));case 2:(e=t.sent)&&w(e.user);case 4:case"end":return t.stop()}}))}()}),[F,n]),Object(c.useEffect)((function(){E&&(M<.2?(H("red"),v.a.vibrate(1e4),Y&&new Notification("Stay focused!")):(H("#fff"),v.a.cancel()))}),[M,E]);var ee=function(){"Notification"in window&&("granted"===Notification.permission?Z(!0):"denied"!==Notification.permission&&Notification.requestPermission().then((function(e){Z("granted"===e)})))},te=s.a.create({container:{flex:1,backgroundColor:A,alignItems:"center",justifyContent:"center"},heading:{fontSize:24,marginBottom:16},input:{height:40,width:"100%",maxWidth:260,borderColor:"gray",borderWidth:1,marginVertical:8,paddingHorizontal:4},focusText:{fontSize:18,marginBottom:8}});return j?u.a.createElement(l.a,{style:te.container},u.a.createElement(f.a,null,"Loading")):u.a.createElement(l.a,{style:te.container},E?u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{style:te.heading},"Notion Linked!"),u.a.createElement(f.a,{style:te.focusText},"Focus: "+(100*M).toFixed(0)+"%"),u.a.createElement(b.a,{title:"Logout",onPress:function(){return n.logout(),w(null),clearInterval(K),U(0),void H("#fff")}})):u.a.createElement(u.a.Fragment,null,u.a.createElement(f.a,{style:te.heading},"Link your Notion"),u.a.createElement(d.a,{style:te.input,onChangeText:function(e){return C(e)},value:k,placeholder:"Device ID"}),u.a.createElement(d.a,{style:te.input,onChangeText:function(e){return L(e)},value:F,placeholder:"Email"}),u.a.createElement(d.a,{style:te.input,onChangeText:function(e){return z(e)},value:W,placeholder:"Password",textContentType:"password",autoCompleteType:"password",secureTextEntry:!0}),u.a.createElement(b.a,{title:"Submit",onPress:function(){return function(){"test"===k&&$(),m.a.setItem("deviceId",k);var e=new g.Notion({deviceId:k});a(e)}()},accessibilityLabel:"Submit"})))}},74:function(e,t,n){n(75),e.exports=n(105)},75:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/stay-focused/expo-service-worker.js",{scope:"/stay-focused/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},96:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=96}},[[74,1,2]]]);
//# sourceMappingURL=app.f75dbfa4.chunk.js.map